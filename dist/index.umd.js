!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@bsv/sdk"),require("sigma-protocol")):"function"==typeof define&&define.amd?define(["exports","@bsv/sdk","sigma-protocol"],t):t((n||self).js1SatOrd={},n.bsv,n.sigmaProtocol)}(this,function(n,t,r){function e(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=Array(t);r<t;r++)e[r]=n[r];return e}function o(n,t){var r="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=function(n,t){if(n){if("string"==typeof n)return e(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(n,t):void 0}}(n))||t&&n&&"number"==typeof n.length){r&&(n=r);var o=0;return function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(){return i=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)({}).hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},i.apply(null,arguments)}function a(n,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},a(n,t)}var s=function(n){for(var t=[],r=0,e=n.length;r<e;r++){var o=Number(n.charCodeAt(r)).toString(16);t.push(o)}return t.join("")},u=/*#__PURE__*/function(n){function r(){return n.apply(this,arguments)||this}var e,o;return o=n,(e=r).prototype=Object.create(o.prototype),e.prototype.constructor=e,a(e,o),r.prototype.lock=function(n,r,e,o){var i="";if(void 0!==r&&void 0!==e){var a=s("ord"),u=Buffer.from(r,"base64").toString("hex").trim();i="OP_0 OP_IF "+a+" OP_1 "+s(e)+" OP_0 "+(u?u+" ":"")+"OP_ENDIF"}var c=(i?i+" ":"")+(new t.P2PKH).lock(n).toASM();if(null!=o&&o.app&&null!=o&&o.type){c=c+" OP_RETURN "+s("1PuQa7K62MiKCtssSLKy1kh56WWU7MtUR5")+" "+s("SET");for(var l=0,d=Object.entries(o);l<d.length;l++){var f=d[l],p=f[0],v=f[1];"cmd"!==p&&(c=c+" "+s(p)+" "+s(v))}}return t.LockingScript.fromASM(c)},r}(t.P2PKH),c=function(n,r){return t.fromUtxo(i({},n,{script:Buffer.from(n.script,"base64").toString("hex")}),r)};n.createOrdinals=function(n,e,i,a,s,l,d,f){void 0===f&&(f=[]);try{for(var p,v=function(n){return Promise.resolve(g.fee(h)).then(function(){return Promise.resolve(g.sign()).then(function(){return g})})},h=new t.SatoshisPerKilobyte(s||10),g=new t.Transaction,P=o(n);!(p=P()).done;){var m=c(p.value,(new t.P2PKH).unlock(i));g.addInput(m)}e.length>100&&console.warn("Creating many inscriptions at once can be slow. Consider using multiple transactions instead.");for(var y,b=o(e);!(y=b()).done;){var w=y.value;if(!w.inscription)throw new Error("Inscription is required for all destinations");g.addOutput({satoshis:1,lockingScript:(new u).lock(w.address,w.inscription.dataB64,w.inscription.contentType,l)})}for(var k,S=o(f);!(k=S()).done;){var O=k.value;g.addOutput({satoshis:O.amount,lockingScript:(new t.P2PKH).lock(O.to)})}g.addOutput({lockingScript:(new t.P2PKH).lock(a),change:!0});var K=null==d?void 0:d.idKey,j=null==d?void 0:d.keyHost,T=function(){if(!K)return function(){if(j){var n=null==d?void 0:d.authToken,t=new r.Sigma(g);return function(r,e){try{var o=Promise.resolve(t.remoteSign(j,n)).then(function(n){g=n.signedTx})}catch(n){return e(n)}return o&&o.then?o.then(void 0,e):o}(0,function(n){throw console.log(n),new Error("Remote signing to "+j+" failed")})}}();var n=new r.Sigma(g).sign(K);g=n.signedTx}();return Promise.resolve(T&&T.then?T.then(v):v())}catch(n){return Promise.reject(n)}},n.sendOrdinals=function(n,r,e,i,a,s,l,d,f){void 0===f&&(f=[]);try{for(var p,v=new t.SatoshisPerKilobyte(l||10),h=new t.Transaction,g=o(r);!(p=g()).done;){var P=c(p.value,(new u).unlock(a));h.addInput(P)}for(var m,y=o(n);!(m=y()).done;){var b=c(m.value,(new t.P2PKH).unlock(e));h.addInput(b)}if(s.length!==r.length)throw new Error("Number of destinations must match number of ordinals being sent");for(var w,k=o(s);!(w=k()).done;){var S,O,K,j=w.value;K=null!=(S=j.inscription)&&S.dataB64&&null!=(O=j.inscription)&&O.contentType?(new u).lock(j.address,j.inscription.dataB64,j.inscription.contentType,d):(new t.P2PKH).lock(j.address),h.addOutput({satoshis:1,lockingScript:K})}for(var T,H=o(f);!(T=H()).done;){var x=T.value;h.addOutput({satoshis:x.amount,lockingScript:(new t.P2PKH).lock(x.to)})}var A=(new t.P2PKH).lock(i);return h.addOutput({lockingScript:A,change:!0}),Promise.resolve(h.fee(v)).then(function(){return Promise.resolve(h.sign()).then(function(){return h})})}catch(n){return Promise.reject(n)}},n.sendUtxos=function(n,r,e,i,a){try{for(var s,u=new t.SatoshisPerKilobyte(a||10),l=new t.Transaction,d=o(n);!(s=d()).done;){var f=c(s.value,(new t.P2PKH).unlock(r));l.addInput(f)}var p={satoshis:i,lockingScript:(new t.P2PKH).lock(e)};l.addOutput(p);var v=r.toAddress().toString(),h=(new t.P2PKH).lock(v);return l.addOutput({lockingScript:h,change:!0}),Promise.resolve(l.fee(u)).then(function(){return Promise.resolve(l.sign()).then(function(){return l})})}catch(n){return Promise.reject(n)}}});
//# sourceMappingURL=index.umd.js.map
